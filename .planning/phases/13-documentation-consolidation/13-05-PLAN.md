---
phase: 13-documentation-consolidation
plan: 05
type: execute
wave: 3
depends_on: [13-03, 13-04]
files_modified:
  - .archive/documentation/manifest.json
  - .archive/documentation/2026-02-*/**
  - docs/index.md
autonomous: true

must_haves:
  truths:
    - "Original ProjectTT files preserved in .archive/documentation/"
    - "Manifest tracks all archived files with checksums"
    - "docs/index.md updated with new documentation links"
  artifacts:
    - path: ".archive/documentation/manifest.json"
      provides: "Archive manifest with all moved files"
      contains: "files"
    - path: "docs/index.md"
      provides: "Updated documentation index"
      contains: "Architecture"
  key_links:
    - from: ".archive/documentation/manifest.json"
      to: "archived files"
      via: "archive_path entries"
      pattern: "archive_path.*documentation"
    - from: "docs/index.md"
      to: "docs/**/*.md"
      via: "markdown links"
      pattern: "\\[.*\\]\\(.*\\.md\\)"
---

<objective>
Archive original ProjectTT files and update docs/index.md with new documentation.

Purpose: Preserve original .docx and .xlsx files in .archive/documentation/ with manifest tracking, then update the documentation index to include newly converted content.
Output: Archived originals with manifest, updated docs/index.md
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-documentation-consolidation/13-CONTEXT.md

# Prior plan outputs
@.planning/phases/13-documentation-consolidation/13-03-SUMMARY.md
@.planning/phases/13-documentation-consolidation/13-04-SUMMARY.md
@.planning/phases/13-documentation-consolidation/projecttt_inventory.json

# Archive infrastructure
@src/ta_lab2/tools/archive/types.py
@src/ta_lab2/tools/archive/manifest.py
@.archive/00-README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Archive original ProjectTT files</name>
  <files>.archive/documentation/manifest.json, .archive/documentation/2026-02-*/**</files>
  <action>
Copy original ProjectTT files to .archive/documentation/ and add to git tracking.

NOTE: ProjectTT files are EXTERNAL to the ta_lab2 repository. They exist outside
this repo's git history. Therefore:
- Use `cp` to copy files into the repo (NOT git mv - files aren't tracked)
- Use `git add` to add copied files to git tracking
- This creates a fresh git history starting from this commit

1. Create archive date directory:
   mkdir -p .archive/documentation/$(date +%Y-%m-%d)

2. For each file from projecttt_inventory.json:
   - Copy from external ProjectTT location to .archive/documentation/YYYY-MM-DD/
   - Use: cp "{source_path}" ".archive/documentation/YYYY-MM-DD/{filename}"
   - Preserve original filename and extension
   - After all copies: git add .archive/documentation/

3. Archive order (by subdirectory for organization):
   a. Root level files (Workspace, Schemas, etc.)
   b. Foundational/ directory contents
   c. Plans&Status/ directory contents
   d. Features/ directory contents (subdirs too)

4. Create FileEntry for each archived file:
   - original_path: Path relative to ProjectTT root
   - archive_path: New path in .archive/
   - action: "migrated" (converted and moved)
   - sha256_checksum: Computed from archived file
   - size_bytes: File size

5. Update .archive/documentation/manifest.json:
   - Use create_manifest() from archive module
   - Include all archived files
   - Set category: "documentation"

6. Add all new files to git:
   git add .archive/documentation/
  </action>
  <verify>
    ls .archive/documentation/2026-*/*.docx 2>/dev/null | head -5 || echo "Check archive paths"
    python -c "from ta_lab2.tools.archive.manifest import validate_manifest; from pathlib import Path; valid, issues = validate_manifest(Path('.archive/documentation/manifest.json')); print('Valid' if valid else issues)"
  </verify>
  <done>
    - All original ProjectTT files copied to .archive/documentation/
    - manifest.json updated with all file entries
    - Checksums computed for all archived files
    - Files organized in date subdirectory
    - Files added to git tracking
  </done>
</task>

<task type="auto">
  <name>Task 2: Update docs/index.md with new documentation</name>
  <files>docs/index.md</files>
  <action>
Add links to converted documentation in docs/index.md.

1. Read existing docs/index.md content

2. Add new sections after existing content (before ## Contributing):

   ## Project Documentation

   Documentation converted from ProjectTT (original files preserved in `.archive/documentation/`).

   ### Architecture
   - [Workspace Overview](architecture/workspace-v1.1.md) - Main project architecture and design
   - [Core Components](architecture/core-components.md) - Foundational system components
   - [Key Terms](architecture/key-terms.md) - Terminology and definitions
   - [Database Schemas](architecture/schemas.md) - Database table definitions
   - [Genesis Files Summary](architecture/genesis-files-summary.md) - Project origins

   ### Features
   - [EMA Documentation](features/emas/) - EMA calculation and analysis
   - [Bar Processing](features/bars/) - Price bar handling
   - [Memory System](features/memory/) - AI memory documentation

   ### Planning
   - [12-Week Plan](planning/12-week-plan.md) - Development roadmap
   - [Status Reports](planning/) - Project status updates

   ### Reference
   - [Timeframes Chart](reference/timeframes-chart.md) - Timeframe definitions
   - [Exchange Info](reference/exchanges-info.md) - Supported exchanges

3. Update navigation to include new sections:
   - Add to Documentation section if exists
   - Preserve existing structure

4. Add note about archived originals:
   > **Note:** Original Word and Excel files are preserved in `.archive/documentation/` with full git history.

5. Validate all links point to existing files
  </action>
  <verify>
    grep -c "architecture/" docs/index.md || echo "Check links added"
    python -c "from pathlib import Path; content = Path('docs/index.md').read_text(); assert 'Project Documentation' in content or 'Architecture' in content"
  </verify>
  <done>
    - docs/index.md updated with new documentation sections
    - Links to architecture, features, planning, reference docs added
    - Note about archived originals included
    - All links validated to point to existing files
  </done>
</task>

</tasks>

<verification>
All verification commands must pass:

```bash
# Archive contains files
ls .archive/documentation/2026-*/ | head -10

# Manifest valid
python -c "import json; m = json.loads(open('.archive/documentation/manifest.json').read()); print(f'Archived {m[\"total_files\"]} files')"

# Index updated
grep -c "architecture" docs/index.md

# Links valid (spot check)
ls docs/architecture/core-components.md 2>/dev/null || echo "Check conversion completed first"
```
</verification>

<success_criteria>
- [ ] All ProjectTT .docx and .xlsx files copied to .archive/documentation/
- [ ] Files added to git tracking (git add, not git mv - external files)
- [ ] manifest.json contains entries for all archived files
- [ ] SHA256 checksums computed and recorded
- [ ] docs/index.md updated with new documentation sections
- [ ] Links to converted documents added
- [ ] Note about archived originals included
</success_criteria>

<output>
After completion, create `.planning/phases/13-documentation-consolidation/13-05-SUMMARY.md`
</output>
