---
phase: 18-structure-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/manifests/decisions.json
  - docs/manifests/decisions-schema.json
  - docs/manifests/DECISIONS.md
autonomous: true

must_haves:
  truths:
    - "Decision manifest contains all major reorganization decisions from Phases 11-17"
    - "JSON Schema validates manifest structure with Draft 2020-12"
    - "Markdown companion provides human-readable rationale for each decision"
  artifacts:
    - path: "docs/manifests/decisions.json"
      provides: "Structured decision tracking with rich metadata"
      contains: "$schema"
    - path: "docs/manifests/decisions-schema.json"
      provides: "JSON Schema 2020-12 validation"
      contains: "https://json-schema.org/draft/2020-12/schema"
    - path: "docs/manifests/DECISIONS.md"
      provides: "Human-readable decision rationale"
      min_lines: 100
  key_links:
    - from: "docs/manifests/decisions.json"
      to: "docs/manifests/decisions-schema.json"
      via: "$schema field references schema file"
      pattern: "\\$schema.*decisions-schema"
    - from: "docs/manifests/DECISIONS.md"
      to: "docs/manifests/decisions.json"
      via: "Rationale IDs match JSON entries"
      pattern: "RAT-[0-9]+"
---

<objective>
Create structured decision manifest consolidating all v0.5.0 reorganization decisions with JSON Schema validation and Markdown companion for detailed rationale.

Purpose: Enable future audits of "Why was file X archived instead of migrated?" with structured queryable data and human-readable explanations.
Output: docs/manifests/ directory with decisions.json, decisions-schema.json, and DECISIONS.md
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 18 context
@.planning/phases/18-structure-documentation/18-RESEARCH.md
@.planning/phases/18-structure-documentation/18-CONTEXT.md

# Existing manifests to consolidate
@.archive/documentation/manifest.json
@.archive/data_tools/2026-02-03/manifest.json
@.archive/external-packages/2026-02-03/manifest.json

# Decisions from STATE.md key-decisions sections
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create JSON Schema for decisions manifest</name>
  <files>docs/manifests/decisions-schema.json</files>
  <action>
Create JSON Schema file following Phase 12 $schema versioning pattern:

1. Create docs/manifests/ directory
2. Create decisions-schema.json with Draft 2020-12:

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ta_lab2.local/schemas/reorganization-decisions/v1.0.0",
  "title": "Reorganization Decisions Manifest",
  "description": "Tracks all major decisions made during v0.5.0 ecosystem reorganization",
  "type": "object",
  "required": ["$schema", "version", "created_at", "decisions"],
  "properties": {
    "$schema": {
      "type": "string",
      "const": "https://ta_lab2.local/schemas/reorganization-decisions/v1.0.0"
    },
    "version": {"type": "string", "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"},
    "created_at": {"type": "string", "format": "date-time"},
    "phase_range": {
      "type": "object",
      "properties": {
        "start": {"type": "integer"},
        "end": {"type": "integer"}
      }
    },
    "decisions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "type", "source", "destination", "action", "timestamp", "phase"],
        "properties": {
          "id": {"type": "string", "pattern": "^DEC-[0-9]+$"},
          "type": {"type": "string", "enum": ["archive", "migrate", "refactor", "merge", "extract", "convert", "create"]},
          "source": {"type": "string"},
          "destination": {"type": "string"},
          "phase": {"type": "integer", "minimum": 11, "maximum": 17},
          "timestamp": {"type": "string", "format": "date-time"},
          "category": {"type": "string"},
          "action": {"type": "string"},
          "rationale_id": {"type": "string", "pattern": "^RAT-[0-9]+$"},
          "related_decisions": {
            "type": "array",
            "items": {"type": "string", "pattern": "^DEC-[0-9]+$"}
          },
          "requirements": {
            "type": "array",
            "items": {"type": "string", "pattern": "^[A-Z]+-[0-9]+$"}
          },
          "file_count": {"type": "integer"},
          "commit_hash": {"type": "string"}
        }
      }
    },
    "rationales": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "summary", "detail"],
        "properties": {
          "id": {"type": "string", "pattern": "^RAT-[0-9]+$"},
          "summary": {"type": "string"},
          "detail": {"type": "string"},
          "alternatives_considered": {
            "type": "array",
            "items": {"type": "string"}
          }
        }
      }
    }
  }
}
```

Follow 18-RESEARCH.md Pattern 1 for schema structure.
  </action>
  <verify>python -c "import json; schema = json.load(open('docs/manifests/decisions-schema.json')); assert schema.get('$schema') == 'https://json-schema.org/draft/2020-12/schema'; print('Schema valid JSON')"</verify>
  <done>decisions-schema.json exists with Draft 2020-12 schema, defines decision and rationale structures with required fields</done>
</task>

<task type="auto">
  <name>Task 2: Create decisions manifest from v0.5.0 phases</name>
  <files>docs/manifests/decisions.json</files>
  <action>
Create decisions.json consolidating major decisions from Phases 11-17:

Read existing manifests and STATE.md key-decisions to extract:
- Phase 11: Memory preparation decisions (snapshot format, tagging strategy, coverage threshold)
- Phase 12: Archive foundation decisions (category-first structure, manifest patterns, checksum validation)
- Phase 13: Documentation consolidation decisions (DOCX conversion approach, content categorization)
- Phase 14: Tools integration decisions (functional categories, archive vs migrate criteria)
- Phase 15: Economic data strategy decisions (archive vs integrate, ALTERNATIVES.md pattern)
- Phases 16-17: Not yet executed, omit

Structure following 18-CONTEXT.md rich fields:

```json
{
  "$schema": "https://ta_lab2.local/schemas/reorganization-decisions/v1.0.0",
  "version": "1.0.0",
  "created_at": "2026-02-03T...",
  "phase_range": {"start": 11, "end": 17},
  "decisions": [
    {
      "id": "DEC-001",
      "type": "archive",
      "source": "ProjectTT/*.docx",
      "destination": ".archive/documentation/2026-02-02/",
      "phase": 13,
      "timestamp": "2026-02-02T21:41:22Z",
      "category": "documentation",
      "action": "Archive original DOCX files after Markdown conversion",
      "rationale_id": "RAT-001",
      "related_decisions": ["DEC-002"],
      "requirements": ["DOC-01", "DOC-02"],
      "file_count": 62
    },
    // ... more decisions
  ],
  "rationales": [
    {
      "id": "RAT-001",
      "summary": "Preserve originals while enabling Markdown-based documentation",
      "detail": "DOCX files archived after conversion to Markdown for searchability and version control. Originals preserved for reference and potential reconversion.",
      "alternatives_considered": ["Delete originals (rejected: violates NO DELETION constraint)", "Keep both in docs/ (rejected: clutters working directory)"]
    }
  ]
}
```

Include at minimum 15-20 major decisions covering:
- Archive structure creation (Phase 12)
- Documentation migration (Phase 13, 62 files)
- Data_Tools migration (Phase 14, 40 migrated, 11 archived)
- Economic packages archive (Phase 15, 42 files)
- Key infrastructure decisions ($schema versioning, checksum validation, etc.)

Use timestamps from manifest files where available.
  </action>
  <verify>python -c "import json; d = json.load(open('docs/manifests/decisions.json')); assert d.get('$schema'); assert len(d.get('decisions', [])) >= 15; print(f'Manifest has {len(d[\"decisions\"])} decisions')"</verify>
  <done>decisions.json contains 15+ major reorganization decisions with source/destination/phase/rationale_id fields matching schema structure</done>
</task>

<task type="auto">
  <name>Task 3: Create DECISIONS.md companion document</name>
  <files>docs/manifests/DECISIONS.md</files>
  <action>
Create Markdown companion with detailed rationale for each decision:

```markdown
# v0.5.0 Reorganization Decisions

**Version:** 1.0.0
**Created:** 2026-02-03
**Phases covered:** 11-17

This document provides human-readable rationale for decisions tracked in `decisions.json`.

## Decision Categories

| Category | Count | Description |
|----------|-------|-------------|
| archive | N | Files moved to .archive/ for preservation |
| migrate | N | Files moved to new location in ta_lab2 |
| convert | N | Files converted to different format |
| create | N | New infrastructure created |

## Rationale Index

### RAT-001: Documentation Preservation Strategy
**Used by:** DEC-001, DEC-002, ...
**Summary:** Preserve originals while enabling Markdown-based documentation

**Detail:**
DOCX files were archived after conversion to Markdown to enable:
- Full-text search in IDE and GitHub
- Version control with meaningful diffs
- Integration with docs/index.md navigation

**Alternatives Considered:**
- Delete originals: Rejected due to NO DELETION constraint
- Keep both in docs/: Rejected to avoid directory clutter
- Convert in-place: Rejected to maintain audit trail

### RAT-002: Category-First Archive Structure
...

### RAT-003: Functional Package Organization for Data_Tools
...

## Decision Timeline

| Phase | Date | Decisions | Files Affected |
|-------|------|-----------|----------------|
| 11 | 2026-02-02 | DEC-011 to DEC-015 | Memory infrastructure |
| 12 | 2026-02-02 | DEC-001 to DEC-005 | Archive foundation |
| 13 | 2026-02-02 | DEC-006 to DEC-010 | 62 documentation files |
| 14 | 2026-02-03 | DEC-016 to DEC-025 | 51 Data_Tools scripts |
| 15 | 2026-02-03 | DEC-026 to DEC-030 | 42 economic package files |

## Decision Details

### DEC-001: Archive ProjectTT Documentation
**Phase:** 13 | **Type:** archive | **Rationale:** RAT-001
**Source:** ProjectTT/*.docx, ProjectTT/**/*.xlsx
**Destination:** .archive/documentation/2026-02-02/

62 files archived including:
- Foundational documents (CoreComponents.docx, KeyTerms.docx, etc.)
- Feature documentation (EMA_*, bar_*, etc.)
- Planning documents (12wk_plan, status updates)

...
```

Include:
1. Rationale index with full explanations for each RAT-XXX
2. Decision timeline by phase
3. Detailed decision entries referencing rationale IDs
4. Cross-references between related decisions
  </action>
  <verify>wc -l docs/manifests/DECISIONS.md | grep -E "^[0-9]{3,}" || echo "Check line count >= 100"</verify>
  <done>DECISIONS.md provides human-readable rationale for all decisions in decisions.json, with category breakdown, timeline, and detailed entries</done>
</task>

</tasks>

<verification>
1. docs/manifests/ directory exists with all three files
2. decisions-schema.json is valid JSON Schema Draft 2020-12
3. decisions.json validates against schema (test with jsonschema library if available)
4. DECISIONS.md references all RAT-XXX IDs from decisions.json
5. Decision count covers major Phases 11-15 reorganization work
</verification>

<success_criteria>
- decisions.json contains 15+ decisions with complete metadata (id, type, source, destination, phase, rationale_id)
- decisions-schema.json validates manifest structure
- DECISIONS.md provides detailed rationale for each RAT-XXX entry
- Files follow Phase 12 $schema versioning patterns
</success_criteria>

<output>
After completion, create `.planning/phases/18-structure-documentation/18-01-SUMMARY.md`
</output>
