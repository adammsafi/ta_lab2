---
phase: 18-structure-documentation
plan: 03
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - docs/REORGANIZATION.md
autonomous: true

must_haves:
  truths:
    - "REORGANIZATION.md documents every file's destination from all 4 external directories"
    - "File listings organized by source directory (ProjectTT, Data_Tools, fredtools2, fedtools2)"
    - "Detailed rationale provided for major decisions, especially archives and extractions"
    - "Migration guide section enables finding moved files"
  artifacts:
    - path: "docs/REORGANIZATION.md"
      provides: "Comprehensive reorganization documentation"
      min_lines: 500
      contains: "## ProjectTT"
  key_links:
    - from: "docs/REORGANIZATION.md"
      to: "docs/manifests/decisions.json"
      via: "References decision IDs"
      pattern: "DEC-[0-9]+"
    - from: "docs/REORGANIZATION.md"
      to: ".archive/"
      via: "Archive destinations listed"
      pattern: "\\.archive/"
---

<objective>
Create comprehensive REORGANIZATION.md documenting what moved where and why during v0.5.0 ecosystem consolidation.

Purpose: Serve as the authoritative reference for the reorganization - anyone asking "where did file X go?" can find the answer here.
Output: docs/REORGANIZATION.md with full file listings, rationale, and migration guide
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 18 context
@.planning/phases/18-structure-documentation/18-RESEARCH.md
@.planning/phases/18-structure-documentation/18-CONTEXT.md

# Decision manifest from Plan 01
@docs/manifests/decisions.json
@docs/manifests/DECISIONS.md

# Diagrams from Plan 02
@docs/diagrams/before_tree.txt
@docs/diagrams/after_tree.txt

# Existing manifests for file listings
@.archive/documentation/manifest.json
@.archive/data_tools/2026-02-03/manifest.json
@.archive/external-packages/2026-02-03/manifest.json

# Phase summaries for context
@.planning/phases/13-documentation-consolidation/13-05-SUMMARY.md
@.planning/phases/14-tools-integration/14-01-SUMMARY.md
@.planning/phases/15-economic-data-strategy/15-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create REORGANIZATION.md header and overview</name>
  <files>docs/REORGANIZATION.md</files>
  <action>
Create the comprehensive reorganization guide following 18-CONTEXT.md structure (organized by source directory, full file listing, detailed rationale).

Start with header and overview sections:

```markdown
# v0.5.0 Ecosystem Reorganization Guide

**Version:** 1.0.0
**Reorganization period:** 2026-02-02 to 2026-02-XX
**Phases covered:** 11-17

This document provides a comprehensive record of the v0.5.0 ecosystem reorganization, which consolidated four external directories (ProjectTT, Data_Tools, fredtools2, fedtools2) into the unified ta_lab2 structure.

## Executive Summary

| Source Directory | Files | Action | Destination |
|------------------|-------|--------|-------------|
| ProjectTT | 62 | Archive + Convert | .archive/documentation/ + docs/ |
| Data_Tools | 51 | Migrate + Archive | src/ta_lab2/tools/data_tools/ + .archive/data_tools/ |
| fredtools2 | 6 | Archive | .archive/external-packages/ |
| fedtools2 | 9 | Archive | .archive/external-packages/ |
| **Total** | **128** | | |

## Key Principles

1. **NO DELETION** - All files preserved in git history and/or .archive/
2. **Memory-first** - All moves tracked in Mem0 memory system
3. **Manifest tracking** - Every archive category has manifest.json with SHA256 checksums
4. **Import continuity** - Migration guide enables updating old imports

## Directory Structure Diagrams

See [docs/diagrams/](diagrams/) for visual representations:
- `before_tree.txt` - Pre-reorganization structure (v0.4.0)
- `after_tree.txt` - Post-reorganization structure (v0.5.0)
- `data_flow.mmd` - Mermaid diagram showing file flow
- `package_structure.mmd` - Internal ta_lab2 organization

## Decision Tracking

All major decisions documented in [docs/manifests/](manifests/):
- `decisions.json` - Structured decision data with $schema validation
- `decisions-schema.json` - JSON Schema for validation
- `DECISIONS.md` - Human-readable rationale

---

## Table of Contents

1. [ProjectTT Migration](#projecttt-migration)
2. [Data_Tools Migration](#data_tools-migration)
3. [fredtools2 Archive](#fredtools2-archive)
4. [fedtools2 Archive](#fedtools2-archive)
5. [Migration Guide](#migration-guide)
6. [Verification](#verification)

---
```

This establishes the document structure. Continue in Task 2 with source directory sections.
  </action>
  <verify>test -f docs/REORGANIZATION.md && head -50 docs/REORGANIZATION.md | grep -q "Executive Summary"</verify>
  <done>REORGANIZATION.md created with header, executive summary, key principles, and table of contents</done>
</task>

<task type="auto">
  <name>Task 2: Add ProjectTT and Data_Tools file listings</name>
  <files>docs/REORGANIZATION.md</files>
  <action>
Append detailed file listings for ProjectTT and Data_Tools sections.

Read from manifests to get complete file lists:
- .archive/documentation/manifest.json for ProjectTT (62 files)
- .archive/data_tools/2026-02-03/manifest.json for archived scripts (11 files)
- 14-01-discovery.json for migrated scripts (40 files)

```markdown
## ProjectTT Migration

**Decision:** DEC-001 | **Rationale:** RAT-001
**Phase:** 13 (Documentation Consolidation)
**Total files:** 62

### Strategy

ProjectTT contained planning documents, feature documentation, and analysis spreadsheets in Word and Excel format. These were:
1. **Converted** to Markdown for docs/ integration
2. **Archived** as originals to .archive/documentation/

### File Listing

#### Foundational Documents (11 files)
| Original Path | Converted To | Archived To |
|---------------|--------------|-------------|
| ProjectTT/Foundational/CoreComponents.docx | docs/architecture/core-components.md | .archive/documentation/2026-02-02/ |
| ProjectTT/Foundational/KeyTerms.docx | docs/reference/key-terms.md | .archive/documentation/2026-02-02/ |
| ProjectTT/Foundational/ta_lab2_GenesisFiles_Summary.docx | docs/architecture/genesis-files.md | .archive/documentation/2026-02-02/ |
| ... | ... | ... |

#### Feature Documentation (18 files)
| Original Path | Converted To | Archived To |
|---------------|--------------|-------------|
| ProjectTT/Features/Bars/DesriptiveDocuments/bar_creation.docx | docs/features/bars/bar-creation.md | .archive/documentation/2026-02-02/ |
| ProjectTT/Features/EMAs/DesriptiveDocuments/ema_overview.docx | docs/features/emas/ema-overview.md | .archive/documentation/2026-02-02/ |
| ... | ... | ... |

#### Planning Documents (12 files)
[Continue with full listing...]

#### Analysis Spreadsheets (21 files)
[Continue with full listing...]

---

## Data_Tools Migration

**Decision:** DEC-016 to DEC-025 | **Rationale:** RAT-003
**Phase:** 14 (Tools Integration)
**Total files:** 51 (40 migrated, 11 archived)

### Strategy

Data_Tools scripts were categorized into functional groups:
- **Migrated (40):** Reusable tools moved to src/ta_lab2/tools/data_tools/
- **Archived (11):** One-off runners and prototypes moved to .archive/data_tools/

### Migrated Scripts (40)

#### analysis/ (3 scripts)
| Original Path | New Path | Purpose |
|---------------|----------|---------|
| Data_Tools/generate_function_map.py | src/ta_lab2/tools/data_tools/analysis/generate_function_map.py | AST-based code analysis |
| Data_Tools/tree_structure.py | src/ta_lab2/tools/data_tools/analysis/tree_structure.py | Directory tree generation |
| Data_Tools/chatgpt/generate_function_map_with_purpose.py | src/ta_lab2/tools/data_tools/analysis/generate_function_map_with_purpose.py | Enhanced function mapping |

#### memory/ (16 scripts)
| Original Path | New Path | Purpose |
|---------------|----------|---------|
| Data_Tools/chatgpt/generate_memories_from_diffs.py | src/ta_lab2/tools/data_tools/memory/generate_memories_from_diffs.py | Git diff to memory |
| Data_Tools/chatgpt/instantiate_final_memories.py | src/ta_lab2/tools/data_tools/memory/instantiate_final_memories.py | Memory finalization |
| ... | ... | ... |

[Continue with export/, context/, generators/, processing/ categories...]

### Archived Scripts (11)

#### one_offs/ (5 scripts)
| Original Path | Archived To | Reason |
|---------------|-------------|--------|
| Data_Tools/write_daily_emas.py | .archive/data_tools/2026-02-03/one_offs/ | Simple wrapper for existing ta_lab2 functionality |
| Data_Tools/write_multi_tf_emas.py | .archive/data_tools/2026-02-03/one_offs/ | Simple wrapper for existing ta_lab2 functionality |
| ... | ... | ... |

#### prototypes/ (6 scripts)
| Original Path | Archived To | Reason |
|---------------|-------------|--------|
| Data_Tools/chatgpt/chatgpt_script_look.py | .archive/data_tools/2026-02-03/prototypes/ | Numbered iteration (prototype) |
| Data_Tools/chatgpt/chatgpt_script_look1.py | .archive/data_tools/2026-02-03/prototypes/ | Numbered iteration (prototype) |
| ... | ... | ... |

---
```

Include EVERY file from the manifests. Per 18-CONTEXT.md: "Full file listing - every file with its destination path (comprehensive)".
  </action>
  <verify>grep -c "ProjectTT" docs/REORGANIZATION.md | grep -E "^[0-9]+" && grep -c "Data_Tools" docs/REORGANIZATION.md | grep -E "^[0-9]+"</verify>
  <done>REORGANIZATION.md includes complete ProjectTT (62 files) and Data_Tools (51 files) listings with original and destination paths</done>
</task>

<task type="auto">
  <name>Task 3: Add fredtools2, fedtools2, migration guide, and verification</name>
  <files>docs/REORGANIZATION.md</files>
  <action>
Complete REORGANIZATION.md with economic packages, migration guide, and verification sections.

```markdown
## fredtools2 Archive

**Decision:** DEC-026 | **Rationale:** RAT-004
**Phase:** 15 (Economic Data Strategy)
**Total files:** 6

### Strategy

fredtools2 was a wrapper around fredapi for FRED economic data. Archived rather than integrated because:
- Zero usage within ta_lab2 codebase
- Ecosystem alternative (fredapi) provides superior functionality
- New FredProvider in ta_lab2.integrations.economic supersedes

### File Listing

| Original Path | Archived To |
|---------------|-------------|
| fredtools2/src/fredtools2/__init__.py | .archive/external-packages/2026-02-03/fredtools2/src/fredtools2/ |
| fredtools2/src/fredtools2/client.py | .archive/external-packages/2026-02-03/fredtools2/src/fredtools2/ |
| fredtools2/src/fredtools2/utils.py | .archive/external-packages/2026-02-03/fredtools2/src/fredtools2/ |
| fredtools2/sql/*.sql | .archive/external-packages/2026-02-03/fredtools2/sql/ |
| fredtools2/pyproject.toml | .archive/external-packages/2026-02-03/fredtools2/ |

### Alternative

Use `ta_lab2.integrations.economic.FredProvider` instead:

```python
# Before (fredtools2)
from fredtools2 import FredClient
client = FredClient(api_key="...")
data = client.get_series("DFF")

# After (ta_lab2)
from ta_lab2.integrations.economic import FredProvider
provider = FredProvider(api_key="...")
result = provider.get_series("DFF")
```

---

## fedtools2 Archive

**Decision:** DEC-027 | **Rationale:** RAT-004
**Phase:** 15 (Economic Data Strategy)
**Total files:** 9

### Strategy

fedtools2 provided Fed policy data utilities. Archived for same reasons as fredtools2.

### File Listing

| Original Path | Archived To |
|---------------|-------------|
| fedtools2/src/fedtools2/__init__.py | .archive/external-packages/2026-02-03/fedtools2/src/fedtools2/ |
| fedtools2/src/fedtools2/fred.py | .archive/external-packages/2026-02-03/fedtools2/src/fedtools2/ |
| fedtools2/src/fedtools2/utils/__init__.py | .archive/external-packages/2026-02-03/fedtools2/src/fedtools2/utils/ |
| fedtools2/src/fedtools2/utils/combine_timeframes.py | .archive/external-packages/2026-02-03/fedtools2/src/fedtools2/utils/ |
| fedtools2/tests/*.py | .archive/external-packages/2026-02-03/fedtools2/tests/ |
| fedtools2/pyproject.toml | .archive/external-packages/2026-02-03/fedtools2/ |

### Alternative

See `.archive/external-packages/2026-02-03/ALTERNATIVES.md` for detailed comparison with fedfred and fredapi ecosystem packages.

---

## Migration Guide

### Import Mapping Quick Reference

| Old Import | New Import | Status |
|------------|------------|--------|
| `from ProjectTT.X import Y` | N/A - docs only | Converted to Markdown |
| `from Data_Tools.generate_function_map import ...` | `from ta_lab2.tools.data_tools.analysis import generate_function_map` | Migrated |
| `from Data_Tools.tree_structure import ...` | `from ta_lab2.tools.data_tools.analysis import tree_structure` | Migrated |
| `from Data_Tools.DataFrame_Consolidation import ...` | `from ta_lab2.tools.data_tools.processing import DataFrame_Consolidation` | Migrated |
| `from Data_Tools.chatgpt.ask_project import ...` | `from ta_lab2.tools.data_tools.context import ask_project` | Migrated |
| `from Data_Tools.chatgpt.generate_memories_from_diffs import ...` | `from ta_lab2.tools.data_tools.memory import generate_memories_from_diffs` | Migrated |
| `from fredtools2 import ...` | `from ta_lab2.integrations.economic import FredProvider` | Replaced |
| `from fedtools2 import ...` | `from ta_lab2.integrations.economic import FredProvider` | Replaced |

### Finding Archived Files

If you need a file that was archived:

1. Check category manifests:
   - `.archive/documentation/manifest.json` - ProjectTT docs
   - `.archive/data_tools/2026-02-03/manifest.json` - Data_Tools scripts
   - `.archive/external-packages/2026-02-03/manifest.json` - fredtools2/fedtools2

2. Search by original filename:
   ```bash
   grep -r "your_file.py" .archive/*/manifest.json
   ```

3. Files are preserved with SHA256 checksums for verification

### Archived Files with Alternatives

| Archived File | Why Archived | Alternative |
|---------------|--------------|-------------|
| Data_Tools/write_daily_emas.py | Wrapper for ta_lab2 func | Use ta_lab2.features.ema directly |
| Data_Tools/write_multi_tf_emas.py | Wrapper for ta_lab2 func | Use ta_lab2.scripts.emas |
| fredtools2/* | Ecosystem alternative superior | Use ta_lab2.integrations.economic.FredProvider |
| fedtools2/* | Ecosystem alternative superior | Use ta_lab2.integrations.economic.FredProvider |

---

## Verification

### Checksum Validation

All archived files have SHA256 checksums in manifest.json. Validate with:

```python
from ta_lab2.tools.archive import validate_manifest
from pathlib import Path

# Validate documentation archive
validate_manifest(Path(".archive/documentation/manifest.json"))

# Validate data_tools archive
validate_manifest(Path(".archive/data_tools/2026-02-03/manifest.json"))
```

### File Count Verification

| Category | Expected | Actual |
|----------|----------|--------|
| ProjectTT archived | 62 | [verify] |
| Data_Tools migrated | 40 | [verify] |
| Data_Tools archived | 11 | [verify] |
| fredtools2 archived | 6 | [verify] |
| fedtools2 archived | 9 | [verify] |
| **Total** | **128** | [verify] |

### Import Verification

Run migration smoke tests:

```bash
pytest tests/test_data_tools_imports.py -v
```

All migrated modules should be importable from their new locations.

---

*Document generated: 2026-02-XX*
*Last verified: 2026-02-XX*
```
  </action>
  <verify>wc -l docs/REORGANIZATION.md | grep -E "^[0-9]{3,}" && grep -q "Migration Guide" docs/REORGANIZATION.md && grep -q "Verification" docs/REORGANIZATION.md</verify>
  <done>REORGANIZATION.md complete with all 4 source directories, migration guide with import mappings, archived file alternatives, and verification section (500+ lines)</done>
</task>

</tasks>

<verification>
1. docs/REORGANIZATION.md exists with 500+ lines
2. Contains sections for all 4 external directories (ProjectTT, Data_Tools, fredtools2, fedtools2)
3. File listings match manifest counts (62 + 51 + 6 + 9 = 128)
4. Migration guide includes import mapping table
5. References diagrams in docs/diagrams/
6. References decision manifest in docs/manifests/
</verification>

<success_criteria>
- REORGANIZATION.md is the single authoritative reference for v0.5.0 reorganization
- Every file from external directories has documented destination
- Rationale provided for archive vs migrate decisions
- Migration guide enables updating old imports
- Cross-references decision manifest and diagrams
</success_criteria>

<output>
After completion, create `.planning/phases/18-structure-documentation/18-03-SUMMARY.md`
</output>
