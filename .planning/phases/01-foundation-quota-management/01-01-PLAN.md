---
phase: 01-foundation-quota-management
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - .env.example
  - src/ta_lab2/tools/ai_orchestrator/config.py
  - tests/orchestrator/test_sdk_validation.py
autonomous: true
user_setup:
  - service: google-cloud
    why: "Gemini CLI requires gcloud authentication"
    env_vars:
      - name: GOOGLE_APPLICATION_CREDENTIALS
        source: "gcloud auth application-default login (creates credentials file)"
    dashboard_config:
      - task: "Enable Vertex AI API"
        location: "Google Cloud Console -> APIs & Services -> Enable APIs"
  - service: openai
    why: "ChatGPT adapter requires API key"
    env_vars:
      - name: OPENAI_API_KEY
        source: "OpenAI Platform -> API Keys"
  - service: anthropic
    why: "Claude API requires API key (for future API mode)"
    env_vars:
      - name: ANTHROPIC_API_KEY
        source: "Anthropic Console -> API Keys"

must_haves:
  truths:
    - "All three SDK packages (anthropic, openai, google-generativeai) are installed and importable"
    - "Mem0 package is installed and can initialize without error"
    - "Environment variables are documented in .env.example"
    - "SDK validation smoke tests pass for each platform"
  artifacts:
    - path: "pyproject.toml"
      provides: "SDK dependencies added to optional-dependencies"
      contains: "anthropic"
    - path: ".env.example"
      provides: "Environment variable documentation template"
      contains: "OPENAI_API_KEY"
    - path: "src/ta_lab2/tools/ai_orchestrator/config.py"
      provides: "Configuration loading from environment"
      exports: ["load_config", "OrchestratorConfig"]
    - path: "tests/orchestrator/test_sdk_validation.py"
      provides: "SDK import and basic validation tests"
      min_lines: 50
  key_links:
    - from: "src/ta_lab2/tools/ai_orchestrator/config.py"
      to: ".env"
      via: "os.environ or python-dotenv"
      pattern: "os\\.environ|dotenv"
---

<objective>
Install and validate all infrastructure dependencies for the AI orchestrator.

Purpose: Establish the foundation layer that all other Phase 1 work builds upon. Without validated SDKs and proper configuration, quota tracking and adapter validation cannot function.

Output:
- pyproject.toml with SDK dependencies
- .env.example template for secrets
- config.py for environment loading
- Passing SDK validation tests
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-quota-management/01-CONTEXT.md
@src/ta_lab2/tools/ai_orchestrator/__init__.py
@pyproject.toml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add SDK dependencies to pyproject.toml</name>
  <files>pyproject.toml</files>
  <action>
Add a new optional dependency group called "orchestrator" to pyproject.toml containing:
- anthropic>=0.40.0 (Claude API SDK)
- openai>=1.50.0 (OpenAI/ChatGPT SDK)
- google-generativeai>=0.8.0 (Gemini SDK)
- mem0ai>=0.1.0 (Mem0 memory layer)
- python-dotenv>=1.0.0 (environment variable loading)

Also add these to a combined "all" group that includes dev + orchestrator.

Do NOT modify existing dependencies or groups - only add the new "orchestrator" group.
  </action>
  <verify>
Run: `pip install -e ".[orchestrator]"` completes without error.
Run: `python -c "import anthropic; import openai; import google.generativeai; import mem0; print('All SDKs imported')"` succeeds.
  </verify>
  <done>All four SDKs plus dotenv are installable via pip install -e ".[orchestrator]"</done>
</task>

<task type="auto">
  <name>Task 2: Create .env.example template</name>
  <files>.env.example</files>
  <action>
Create .env.example with documented environment variables:

```
# AI Orchestrator Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to git (it's in .gitignore)

# === API Keys ===
# OpenAI API key for ChatGPT adapter
OPENAI_API_KEY=sk-your-key-here

# Anthropic API key for Claude API mode (optional - Claude Code uses desktop app)
ANTHROPIC_API_KEY=sk-ant-your-key-here

# Google Cloud credentials (run: gcloud auth application-default login)
# This creates a credentials file automatically
GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# === Quota Settings ===
# Gemini daily quota limit (default: 1500)
GEMINI_DAILY_QUOTA=1500

# Quota alert thresholds (comma-separated percentages)
QUOTA_ALERT_THRESHOLDS=50,80,90

# === Memory Configuration ===
# Mem0 configuration (local ChromaDB by default)
MEM0_STORAGE_PATH=./.memory/mem0

# Vertex AI Memory Bank (optional cloud storage)
VERTEX_AI_PROJECT=your-gcp-project-id
VERTEX_AI_LOCATION=us-central1
```

Ensure .env is listed in .gitignore (verify, add if missing).
  </action>
  <verify>
File .env.example exists with all documented variables.
Run: `grep -q ".env" .gitignore && echo "Protected" || echo "NOT PROTECTED"` returns "Protected"
  </verify>
  <done>.env.example provides clear template for all required secrets and configuration</done>
</task>

<task type="auto">
  <name>Task 3: Create orchestrator config module</name>
  <files>src/ta_lab2/tools/ai_orchestrator/config.py</files>
  <action>
Create config.py that:

1. Defines OrchestratorConfig dataclass with fields:
   - openai_api_key: Optional[str]
   - anthropic_api_key: Optional[str]
   - google_credentials_path: Optional[str]
   - gemini_daily_quota: int = 1500
   - quota_alert_thresholds: list[int] = [50, 80, 90]
   - mem0_storage_path: str = "./.memory/mem0"
   - vertex_ai_project: Optional[str]
   - vertex_ai_location: str = "us-central1"

2. Implements load_config() function that:
   - Loads .env file using python-dotenv (if exists)
   - Reads all values from environment variables
   - Returns OrchestratorConfig instance
   - Logs warning (not error) for missing optional keys

3. Implements validate_config(config) function that:
   - Returns dict of {sdk_name: bool} for which SDKs are configured
   - Does NOT fail on missing keys - just reports status

Export: load_config, OrchestratorConfig, validate_config
  </action>
  <verify>
Run: `python -c "from ta_lab2.tools.ai_orchestrator.config import load_config, OrchestratorConfig; c = load_config(); print(c)"` works.
  </verify>
  <done>Config module loads environment variables and reports SDK configuration status</done>
</task>

</tasks>

<verification>
1. `pip install -e ".[orchestrator]"` completes successfully
2. `python -c "import anthropic; import openai; import google.generativeai; import mem0"` succeeds
3. `.env.example` exists with all documented variables
4. `from ta_lab2.tools.ai_orchestrator.config import load_config` works
5. `.env` is in .gitignore
</verification>

<success_criteria>
- All SDK packages installable via single pip command
- Environment variable template documented for users
- Config module loads settings from environment
- No secrets committed to repository
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-quota-management/01-01-SUMMARY.md`
</output>
