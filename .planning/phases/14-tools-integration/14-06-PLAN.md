---
phase: 14-tools-integration
plan: 06
type: execute
wave: 3
depends_on: ["14-02"]
files_modified:
  - src/ta_lab2/tools/data_tools/export/export_chatgpt_conversations.py
  - src/ta_lab2/tools/data_tools/export/chatgpt_export_diff.py
  - src/ta_lab2/tools/data_tools/export/chatgpt_export_clean.py
  - src/ta_lab2/tools/data_tools/export/process_new_chatgpt_dump.py
  - src/ta_lab2/tools/data_tools/export/__init__.py
autonomous: true

must_haves:
  truths:
    - "ChatGPT export processing tools migrated with working imports"
    - "File I/O uses pathlib and config patterns"
    - "No hardcoded user-specific paths"
  artifacts:
    - path: "src/ta_lab2/tools/data_tools/export/export_chatgpt_conversations.py"
      provides: "ChatGPT conversation export"
      min_lines: 100
    - path: "src/ta_lab2/tools/data_tools/export/__init__.py"
      provides: "Export module exports"
      contains: "__all__"
  key_links: []
---

<objective>
Migrate ChatGPT export and processing tools from Data_Tools/chatgpt/

Purpose: Move conversation export and processing utilities that extract and transform ChatGPT data. These are data pipeline tools with minimal external dependencies.

Output: Working export module with conversation processing tools
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14-tools-integration/14-CONTEXT.md
@.planning/phases/14-tools-integration/14-01-SUMMARY.md
@.planning/phases/14-tools-integration/14-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate core export tools</name>
  <files>
    src/ta_lab2/tools/data_tools/export/export_chatgpt_conversations.py
    src/ta_lab2/tools/data_tools/export/extract_kept_chats_from_keepfile.py
  </files>
  <action>
Migrate from C:\Users\asafi\Downloads\Data_Tools\chatgpt\:

**export_chatgpt_conversations.py** (11.6KB):
1. Read source to understand JSON parsing/export logic
2. Update path handling:
   - Input files (ChatGPT export JSON) -> CLI argument
   - Output files -> CLI argument with default in project output dir
3. Remove any sys.path manipulation
4. Add module docstring explaining expected input format (ChatGPT export ZIP structure)

**extract_kept_chats_from_keepfile.py** (8.4KB):
1. Likely filters conversations based on a "keep" list
2. Same path/import updates as above
3. Document keep file format in docstring

For both:
- Use pathlib.Path consistently
- Add logging.getLogger(__name__)
- Ensure main() uses argparse pattern
  </action>
  <verify>
    python -c "from ta_lab2.tools.data_tools.export.export_chatgpt_conversations import main"
  </verify>
  <done>Core export tools migrated with proper path handling</done>
</task>

<task type="auto">
  <name>Task 2: Migrate diff and cleaning tools</name>
  <files>
    src/ta_lab2/tools/data_tools/export/chatgpt_export_diff.py
    src/ta_lab2/tools/data_tools/export/chatgpt_export_clean.py
    src/ta_lab2/tools/data_tools/export/chatgpt_pipeline.py
  </files>
  <action>
Migrate from C:\Users\asafi\Downloads\Data_Tools\chatgpt\:

**chatgpt_export_diff.py** (23.9KB):
1. Large file - check for hardcoded paths carefully
2. Likely diffs two ChatGPT exports to find new conversations
3. Document diff output format

**chatgpt_export_clean.py** (11.5KB):
1. Cleans/normalizes ChatGPT export data
2. Check for data transformation logic

**chatgpt_pipeline.py** (8.3KB):
1. Orchestrates multiple export steps
2. May reference other scripts - update internal imports to use ta_lab2 paths:
   - `from ta_lab2.tools.data_tools.export.export_chatgpt_conversations import ...`

All files:
- Replace hardcoded paths with CLI args or config
- Add comprehensive docstrings
- Use module-level logger
  </action>
  <verify>
    python -c "from ta_lab2.tools.data_tools.export import chatgpt_export_diff, chatgpt_export_clean"
  </verify>
  <done>Diff and cleaning tools migrated</done>
</task>

<task type="auto">
  <name>Task 3: Migrate processing tools and update __init__.py</name>
  <files>
    src/ta_lab2/tools/data_tools/export/process_new_chatgpt_dump.py
    src/ta_lab2/tools/data_tools/export/process_claude_history.py
    src/ta_lab2/tools/data_tools/export/convert_claude_code_to_chatgpt_format.py
    src/ta_lab2/tools/data_tools/export/__init__.py
  </files>
  <action>
Migrate remaining export-related scripts:

**process_new_chatgpt_dump.py** (8KB):
- Processes new ChatGPT data exports
- Entry point for handling fresh exports

**process_claude_history.py** (5.3KB):
- Processes Claude conversation history
- Cross-platform conversation handling

**convert_claude_code_to_chatgpt_format.py** (6.1KB):
- Format conversion between Claude and ChatGPT
- Document input/output formats

Create __init__.py:
```python
"""
ChatGPT and Claude export processing tools.

Tools for:
- Exporting ChatGPT conversations from data exports
- Diffing exports to find new conversations
- Cleaning and normalizing export data
- Processing Claude conversation history
- Format conversion between platforms

Usage:
    # Export conversations
    python -m ta_lab2.tools.data_tools.export.export_chatgpt_conversations --input /path/to/export.zip

    # Diff two exports
    python -m ta_lab2.tools.data_tools.export.chatgpt_export_diff --old /path/old --new /path/new
"""
from ta_lab2.tools.data_tools.export.export_chatgpt_conversations import (
    export_conversations,
)
from ta_lab2.tools.data_tools.export.chatgpt_export_diff import (
    diff_exports,
)
from ta_lab2.tools.data_tools.export.chatgpt_export_clean import (
    clean_export,
)

__all__ = [
    "export_conversations",
    "diff_exports",
    "clean_export",
]
```

Adjust function names based on actual script contents.

Commit with message:
```
feat(14): migrate export/processing tools from Data_Tools

- export_chatgpt_conversations.py: ChatGPT data export
- chatgpt_export_diff.py: Export diff detection
- chatgpt_export_clean.py: Export cleaning/normalization
- chatgpt_pipeline.py: Export orchestration
- process_*.py: Conversation processing utilities
- convert_claude_code_to_chatgpt_format.py: Format conversion
```
  </action>
  <verify>
    python -c "from ta_lab2.tools.data_tools import export; print(export.__all__)"
  </verify>
  <done>export module complete with all processing tools; __init__.py exports public functions</done>
</task>

</tasks>

<verification>
- `python -c "from ta_lab2.tools.data_tools.export import export_conversations"` succeeds
- `grep -r "C:\\\\Users\\\\asafi" src/ta_lab2/tools/data_tools/export/` returns nothing
- All scripts have main() with argparse for CLI usage
</verification>

<success_criteria>
1. All ChatGPT export tools migrated (export, diff, clean, pipeline)
2. Claude processing tools migrated
3. Format conversion tool migrated
4. No hardcoded user-specific paths
5. All use pathlib.Path for file operations
6. export/__init__.py exports public functions
7. Imports work: `from ta_lab2.tools.data_tools.export import ...`
</success_criteria>

<output>
After completion, create `.planning/phases/14-tools-integration/14-06-SUMMARY.md`
</output>
