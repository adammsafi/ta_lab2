---
phase: 14-tools-integration
plan: 07
type: execute
wave: 3
depends_on: ["14-02"]
files_modified:
  - src/ta_lab2/tools/data_tools/generators/review_generator.py
  - src/ta_lab2/tools/data_tools/generators/category_digest_generator.py
  - src/ta_lab2/tools/data_tools/generators/intelligence_report_generator.py
  - src/ta_lab2/tools/data_tools/generators/finetuning_data_generator.py
  - src/ta_lab2/tools/data_tools/generators/__init__.py
  - src/ta_lab2/tools/data_tools/context/get_context.py
  - src/ta_lab2/tools/data_tools/context/chat_with_context.py
  - src/ta_lab2/tools/data_tools/context/__init__.py
autonomous: true

must_haves:
  truths:
    - "Generator tools migrated with working imports"
    - "Context tools migrated with working imports"
    - "OpenAI dependencies handled gracefully"
  artifacts:
    - path: "src/ta_lab2/tools/data_tools/generators/__init__.py"
      provides: "Generator module exports"
      contains: "__all__"
    - path: "src/ta_lab2/tools/data_tools/context/__init__.py"
      provides: "Context module exports"
      contains: "__all__"
  key_links:
    - from: "src/ta_lab2/tools/data_tools/context/chat_with_context.py"
      to: "get_context.py"
      via: "ta_lab2 import"
      pattern: "from ta_lab2.tools.data_tools.context.get_context import"
---

<objective>
Migrate generator and context tools from Data_Tools/chatgpt/

Purpose: Move report generation tools (review, digest, intelligence reports) and context retrieval tools. These are AI-powered utilities for content generation.

Output: Working generators and context modules
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14-tools-integration/14-CONTEXT.md
@.planning/phases/14-tools-integration/14-01-SUMMARY.md
@.planning/phases/14-tools-integration/14-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate generator tools</name>
  <files>
    src/ta_lab2/tools/data_tools/generators/review_generator.py
    src/ta_lab2/tools/data_tools/generators/category_digest_generator.py
    src/ta_lab2/tools/data_tools/generators/intelligence_report_generator.py
    src/ta_lab2/tools/data_tools/generators/finetuning_data_generator.py
    src/ta_lab2/tools/data_tools/generators/review_triage_generator.py
  </files>
  <action>
Migrate from C:\Users\asafi\Downloads\Data_Tools\chatgpt\:

**review_generator.py** (3.8KB):
- Generates code/content reviews
- Likely uses OpenAI for review generation

**category_digest_generator.py** (4.6KB):
- Creates category-based digests
- Document expected input format

**intelligence_report_generator.py** (similar size):
- Generates intelligence reports from data
- Document report structure

**finetuning_data_generator.py** (6.4KB):
- Generates training data for fine-tuning
- Document output format (likely JSONL)

**review_triage_generator.py** (4.9KB):
- Triages and prioritizes reviews
- Document triage criteria

For all:
1. Handle OpenAI dependency with try/except ImportError
2. Remove hardcoded paths
3. Add module docstrings with usage examples
4. Use pathlib.Path consistently
5. Add module-level logger
  </action>
  <verify>
    python -c "from ta_lab2.tools.data_tools.generators import review_generator"
  </verify>
  <done>Generator tools migrated with OpenAI dependency handling</done>
</task>

<task type="auto">
  <name>Task 2: Migrate context tools</name>
  <files>
    src/ta_lab2/tools/data_tools/context/get_context.py
    src/ta_lab2/tools/data_tools/context/chat_with_context.py
    src/ta_lab2/tools/data_tools/context/create_reasoning_engine.py
    src/ta_lab2/tools/data_tools/context/query_reasoning_engine.py
    src/ta_lab2/tools/data_tools/context/ask_project.py
  </files>
  <action>
Migrate from C:\Users\asafi\Downloads\Data_Tools\chatgpt\:

**get_context.py** (4.6KB):
- Retrieves context from memory/vector store
- Core utility for context-aware operations

**chat_with_context.py** (5.2KB):
- Chat interface with context injection
- **Likely imports get_context - update to ta_lab2 path:**
  - Change: `from get_context import get_context`
  - To: `from ta_lab2.tools.data_tools.context.get_context import get_context`

**create_reasoning_engine.py** (9.8KB):
- Creates reasoning engine (possibly RAG-based)
- Document architecture and dependencies

**query_reasoning_engine.py** (2.7KB):
- Queries the reasoning engine
- **Likely imports create_reasoning_engine - update to ta_lab2 path**
- Document query interface

**ask_project.py** (17.5KB):
- Large file - comprehensive project Q&A tool
- Check for hardcoded paths carefully
- This may be the main entry point for project queries
- **Check for ALL internal imports and update to ta_lab2 paths**

For all:
1. Handle optional dependencies (openai, chromadb, mem0)
2. **Update internal imports if scripts reference each other** - use ta_lab2 paths
3. Remove hardcoded paths
4. Add comprehensive docstrings
  </action>
  <verify>
    python -c "from ta_lab2.tools.data_tools.context import get_context, chat_with_context"
  </verify>
  <done>Context tools migrated with proper dependency handling and cross-imports updated</done>
</task>

<task type="auto">
  <name>Task 3: Create __init__.py files and verify all cross-imports</name>
  <files>
    src/ta_lab2/tools/data_tools/generators/__init__.py
    src/ta_lab2/tools/data_tools/context/__init__.py
  </files>
  <action>
Create generators/__init__.py:
```python
"""
Report and content generation tools.

Generators for:
- Code/content reviews
- Category digests
- Intelligence reports
- Fine-tuning training data
- Review triage

Dependencies:
- OpenAI (for content generation): pip install openai

Usage:
    from ta_lab2.tools.data_tools.generators import review_generator
    # Or CLI
    python -m ta_lab2.tools.data_tools.generators.review_generator --input /path
"""
from ta_lab2.tools.data_tools.generators.review_generator import generate_review
from ta_lab2.tools.data_tools.generators.category_digest_generator import generate_digest
from ta_lab2.tools.data_tools.generators.finetuning_data_generator import generate_finetuning_data

__all__ = [
    "generate_review",
    "generate_digest",
    "generate_finetuning_data",
]
```

Create context/__init__.py:
```python
"""
Context retrieval and reasoning tools.

Tools for:
- Retrieving context from memory stores
- Context-aware chat interfaces
- Reasoning engine creation and querying
- Project Q&A

Dependencies:
- OpenAI (for embeddings/chat): pip install openai
- ChromaDB (for vector store): pip install chromadb

Usage:
    from ta_lab2.tools.data_tools.context import get_context
    context = get_context("What is the EMA calculation?")
"""
from ta_lab2.tools.data_tools.context.get_context import get_context
from ta_lab2.tools.data_tools.context.chat_with_context import chat_with_context

__all__ = [
    "get_context",
    "chat_with_context",
]
```

Adjust function names based on actual script contents.

**Cross-import verification (CRITICAL for context module):**
Context tools typically chain (chat_with_context uses get_context, query uses create, etc.).

After migration, verify ALL cross-imports use ta_lab2 paths:
```bash
# Check generators - should find ta_lab2 imports only
grep -E "^(from|import)" src/ta_lab2/tools/data_tools/generators/*.py | grep -v "ta_lab2" | grep -v "^#" | grep -v "pathlib\|logging\|argparse\|openai\|json\|typing\|os\|sys"

# Check context - should find ta_lab2 imports only
grep -E "^(from|import)" src/ta_lab2/tools/data_tools/context/*.py | grep -v "ta_lab2" | grep -v "^#" | grep -v "pathlib\|logging\|argparse\|openai\|chromadb\|json\|typing\|os\|sys"
```

**If bare imports found**, update them:
- `from get_context import get_context` -> `from ta_lab2.tools.data_tools.context.get_context import get_context`
- `import create_reasoning_engine` -> `from ta_lab2.tools.data_tools.context import create_reasoning_engine`

Commit with message:
```
feat(14): migrate generators and context tools from Data_Tools

Generators:
- review_generator.py, category_digest_generator.py
- intelligence_report_generator.py, finetuning_data_generator.py
- review_triage_generator.py

Context:
- get_context.py, chat_with_context.py
- create_reasoning_engine.py, query_reasoning_engine.py
- ask_project.py

All with OpenAI/ChromaDB dependency handling and ta_lab2 cross-imports
```
  </action>
  <verify>
    - `python -c "from ta_lab2.tools.data_tools import generators, context"` succeeds
    - `grep -E "^(from|import).*(get_context|chat_with|reasoning|ask_project)" src/ta_lab2/tools/data_tools/context/*.py | grep -v ta_lab2` returns nothing (all internal refs use ta_lab2 paths)
  </verify>
  <done>generators and context modules complete with exports; all cross-imports verified to use ta_lab2 paths</done>
</task>

</tasks>

<verification>
- `python -c "from ta_lab2.tools.data_tools.generators import review_generator"` succeeds
- `python -c "from ta_lab2.tools.data_tools.context import get_context"` succeeds
- `grep -r "C:\\\\Users" src/ta_lab2/tools/data_tools/generators/` returns nothing
- `grep -r "C:\\\\Users" src/ta_lab2/tools/data_tools/context/` returns nothing
- Cross-script references use `from ta_lab2.tools.data_tools...` import paths (no bare module imports)
</verification>

<success_criteria>
1. All 5 generator tools migrated
2. All 5 context tools migrated
3. OpenAI/ChromaDB dependencies handled gracefully
4. No hardcoded paths
5. Both __init__.py files export public functions
6. Imports work from package level
7. All cross-script imports use ta_lab2 import paths (not relative filesystem or bare module imports)
</success_criteria>

<output>
After completion, create `.planning/phases/14-tools-integration/14-07-SUMMARY.md`
</output>
