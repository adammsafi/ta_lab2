---
phase: 16-repository-cleanup
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/index.md
  - docs/architecture/
  - docs/analysis/
  - docs/guides/
autonomous: true

must_haves:
  truths:
    - "Loose .md files from root moved to appropriate docs/ subdirectories"
    - "docs/index.md updated to reference new locations"
    - "Module-level READMEs left in place"
  artifacts:
    - path: "docs/architecture/api-map.md"
      provides: "API documentation (moved from API_MAP.md)"
      min_lines: 100
    - path: "docs/index.md"
      provides: "Updated documentation index"
      contains: "api-map"
  key_links:
    - from: "docs/index.md"
      to: "docs/architecture/api-map.md"
      via: "markdown link"
      pattern: "\\[.*\\]\\(.*api-map.*\\)"
---

<objective>
Organize loose .md files from root into appropriate docs/ subdirectories

Purpose: Consolidate documentation per CLEAN-02 - move scattered .md files to organized docs/ structure
Output: Clean root with documentation organized in docs/ by category
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-repository-cleanup/16-CONTEXT.md

# Current docs structure
@docs/index.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Categorize and move loose .md files from root</name>
  <files>
    docs/architecture/
    docs/analysis/
    docs/guides/
    docs/migration/
  </files>
  <action>
Move loose .md files from root to appropriate docs/ subdirectories:

**Architecture documentation -> docs/architecture/:**
- API_MAP.md -> docs/architecture/api-map.md (API documentation)
- ARCHITECTURE.md -> docs/architecture/architecture.md (main architecture doc)
- structure.md -> docs/architecture/structure.md (project structure)

**Analysis documentation -> docs/analysis/:**
- lab2_analysis_gemini.md -> docs/analysis/lab2-analysis-gemini.md

**Migration/EMA documentation -> docs/features/emas/:**
- EMA_FEATURE_MIGRATION_PLAN.md -> docs/features/emas/ema-feature-migration-plan.md
- EMA_MIGRATION_SESSION_SUMMARY.md -> docs/features/emas/ema-migration-session-summary.md

**CI/DevOps -> docs/guides/:**
- CI_DEPENDENCY_FIXES.md -> docs/guides/ci-dependency-fixes.md

For each file:
1. Read file to confirm category is appropriate
2. Use `git mv` to preserve history
3. Update any internal links if they reference moved files

**Naming convention:**
- Convert to lowercase with hyphens (API_MAP.md -> api-map.md)
- Remove special characters
- Keep descriptive names

**Do NOT move (essential root files):**
- README.md (project README)
- CHANGELOG.md (project changelog)
- CONTRIBUTING.md (contribution guide)
- SECURITY.md (security policy)

**Create directories if needed:**
- docs/analysis/ (may not exist)
- docs/migration/ (may not exist)
  </action>
  <verify>
- `ls *.md` in root shows only README.md, CHANGELOG.md, CONTRIBUTING.md, SECURITY.md
- `ls docs/architecture/` shows api-map.md, architecture.md, structure.md
- `ls docs/analysis/` shows lab2-analysis-gemini.md
- `git log --follow docs/architecture/api-map.md` shows history from API_MAP.md
  </verify>
  <done>
Loose .md files moved to appropriate docs/ subdirectories with git history preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update docs/index.md with new file locations</name>
  <files>docs/index.md</files>
  <action>
Update docs/index.md to include links to newly moved documentation:

1. Read current docs/index.md structure
2. Add new entries for moved files under appropriate sections:

**Architecture section:**
```markdown
### Architecture
- [API Map](architecture/api-map.md) - Complete API documentation
- [Architecture Overview](architecture/architecture.md) - System architecture
- [Project Structure](architecture/structure.md) - Directory structure
```

**Analysis section (create if needed):**
```markdown
### Analysis
- [Gemini Analysis](analysis/lab2-analysis-gemini.md) - Analysis with Gemini
```

**Features/EMAs section (update existing):**
```markdown
### EMA Features
- [EMA Migration Plan](features/emas/ema-feature-migration-plan.md) - Migration planning
- [EMA Migration Summary](features/emas/ema-migration-session-summary.md) - Session summary
```

**Guides section:**
```markdown
### Guides
- [CI Dependency Fixes](guides/ci-dependency-fixes.md) - CI troubleshooting
```

Ensure:
- Links use relative paths from docs/index.md
- All new files are listed
- Existing entries are preserved
- Sections are logically organized
  </action>
  <verify>
- `cat docs/index.md` shows new entries
- Links resolve correctly: `grep -E '\[.*\]\(.*api-map.*\)' docs/index.md` finds link
- No broken links (check each link target exists)
  </verify>
  <done>
docs/index.md updated with links to all moved documentation files.
  </done>
</task>

<task type="auto">
  <name>Task 3: Clean up duplicate/empty docs in docs/</name>
  <files>
    docs/
    .archive/documentation/
  </files>
  <action>
Clean up the docs/ directory of duplicates and empty files:

**Empty/placeholder files to remove or archive:**
- docs/dim_timeframe.md (0 bytes - empty)
- docs/nul (Windows artifact - remove)

**Duplicate files to consolidate (check if same content):**
In docs/time/:
- dim_timeframe.md vs dim_timeframe1.md (check if duplicate)
- trading_sessions.md vs trading_sessions1.md (check if duplicate)
- time_model_overview.md vs time_model_overview1.md (check if duplicate)
- architecture_index.md vs ARCHITECTURE1.md (check if duplicate)

For each duplicate pair:
1. Compare contents with `diff` or SHA256
2. If identical: Archive the numbered version (keep non-numbered as canonical)
3. If different: Keep both, rename numbered version to indicate difference

**Conversion artifacts to archive:**
- docs/conversion_checkpoint.json
- docs/conversion_errors.json
- docs/conversion_notes.md

These are Phase 13 conversion artifacts. Archive to .archive/documentation/2026-02-03/conversion/:
```bash
mkdir -p .archive/documentation/2026-02-03/conversion
git mv docs/conversion_*.json .archive/documentation/2026-02-03/conversion/
git mv docs/conversion_notes.md .archive/documentation/2026-02-03/conversion/
```

Update documentation manifest with archived conversion artifacts.
  </action>
  <verify>
- `ls docs/` shows no .json files (conversion artifacts archived)
- `ls docs/` shows no empty files
- `cat docs/time/dim_timeframe.md` has content (canonical version)
- No duplicate files remain in docs/time/
  </verify>
  <done>
docs/ directory cleaned of duplicates, empty files, and conversion artifacts.
  </done>
</task>

</tasks>

<verification>
Phase 16 Plan 03 verification:

1. Root .md files cleaned:
   ```bash
   ls *.md  # Should show only README.md, CHANGELOG.md, CONTRIBUTING.md, SECURITY.md
   ```

2. Moved files in correct locations:
   ```bash
   test -f docs/architecture/api-map.md && echo "OK"
   test -f docs/architecture/architecture.md && echo "OK"
   test -f docs/analysis/lab2-analysis-gemini.md && echo "OK"
   ```

3. docs/index.md updated:
   ```bash
   grep -c "api-map" docs/index.md  # Should be >= 1
   ```

4. No duplicates or empty files:
   ```bash
   find docs -empty -type f  # Should be empty
   find docs -name "*1.md" | wc -l  # Should be 0 (duplicates resolved)
   ```
</verification>

<success_criteria>
- Root directory has only essential .md files (README, CHANGELOG, CONTRIBUTING, SECURITY)
- docs/architecture/ contains api-map.md, architecture.md, structure.md
- docs/analysis/ contains lab2-analysis-gemini.md
- docs/features/emas/ contains ema migration docs
- docs/guides/ contains ci-dependency-fixes.md
- docs/index.md links to all moved documentation
- No empty or duplicate files in docs/
- Conversion artifacts archived to .archive/documentation/
</success_criteria>

<output>
After completion, create `.planning/phases/16-repository-cleanup/16-03-SUMMARY.md`
</output>
