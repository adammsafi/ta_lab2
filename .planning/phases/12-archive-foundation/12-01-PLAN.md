---
phase: 12-archive-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .archive/00-README.md
  - .archive/2026-02-02/manifest.json
  - .archive/2026-02-02/deprecated/.gitkeep
  - .archive/2026-02-02/refactored/.gitkeep
  - .archive/2026-02-02/migrated/.gitkeep
  - .archive/2026-02-02/documentation/.gitkeep
  - .archive/test_git_history/.gitkeep
autonomous: true

must_haves:
  truths:
    - ".archive/ directory exists with ISO 8601 timestamped subdirectories"
    - "Category subdirectories (deprecated, refactored, migrated, documentation) exist"
    - "00-README.md documents archive structure, purpose, and retrieval instructions"
    - "manifest.json template exists in .archive/2026-02-02/ with schema versioning"
    - "git mv preserves file history (git log --follow shows full history)"
    - "Verification pattern documented for future archive operations"
  artifacts:
    - path: ".archive/00-README.md"
      provides: "Archive documentation with structure, purpose, retrieval guide"
      min_lines: 50
    - path: ".archive/2026-02-02/manifest.json"
      provides: "Template manifest for tracking archived files"
      contains: "$schema"
    - path: ".archive/2026-02-02/deprecated/.gitkeep"
      provides: "Placeholder for deprecated code category"
    - path: ".archive/2026-02-02/refactored/.gitkeep"
      provides: "Placeholder for refactored code category"
    - path: ".archive/2026-02-02/migrated/.gitkeep"
      provides: "Placeholder for migrated code category"
    - path: ".archive/2026-02-02/documentation/.gitkeep"
      provides: "Placeholder for archived documentation"
  key_links:
    - from: ".archive/00-README.md"
      to: "archive categories"
      via: "directory structure documentation"
      pattern: "deprecated|refactored|migrated|documentation"
    - from: ".archive/2026-02-02/manifest.json"
      to: "archive schema"
      via: "$schema field"
      pattern: "ta_lab2.local/schemas/archive-manifest"
---

<objective>
Create the .archive/ directory structure and verify git history preservation patterns.

Purpose: Establish the foundation for safe file archiving before any v0.5.0 reorganization begins. This ensures all future archive operations have a documented home and proven git history preservation patterns.

Output:
- .archive/ directory with timestamped category subdirectories
- 00-README.md documenting archive structure and retrieval instructions
- manifest.json template for tracking archived files
- Verified git mv workflow that preserves file history
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-archive-foundation/12-RESEARCH.md

# Relevant prior work - memory/migration.py patterns
@src/ta_lab2/tools/ai_orchestrator/memory/migration.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create archive directory structure with README and manifest template</name>
  <files>
    .archive/00-README.md
    .archive/2026-02-02/manifest.json
    .archive/2026-02-02/deprecated/.gitkeep
    .archive/2026-02-02/refactored/.gitkeep
    .archive/2026-02-02/migrated/.gitkeep
    .archive/2026-02-02/documentation/.gitkeep
  </files>
  <action>
Create the .archive/ directory structure following the ISO 8601 date/category hierarchy pattern from research:

1. Create .archive/ root directory

2. Create 00-README.md with:
   - Purpose: "Archive for files removed from active codebase during v0.5.0 reorganization"
   - Structure diagram showing:
     ```
     .archive/
     ├── 00-README.md           # This file
     ├── YYYY-MM-DD/            # Date of archive operation (ISO 8601)
     │   ├── deprecated/        # Code no longer needed
     │   │   ├── manifest.json  # File inventory for category
     │   │   └── *.py           # Archived files
     │   ├── refactored/        # Code replaced during refactor
     │   ├── migrated/          # Code moved to new location
     │   └── documentation/     # Archived docs (Word, Excel, etc.)
     └── manifest.json          # Master manifest for date
     ```
   - Category definitions:
     - deprecated: Code no longer needed (backup artifacts, old implementations)
     - refactored: Code replaced by refactored version (*_refactored.py originals)
     - migrated: Code moved to new location within ta_lab2
     - documentation: Non-code files (Word docs, Excel, etc.)
   - Retrieval instructions:
     - Finding where a file went: `grep -r "original_path.*filename" .archive/*/manifest.json`
     - Viewing file history: `git log --follow .archive/YYYY-MM-DD/category/filename`
     - Restoring a file: `git checkout HEAD -- .archive/path/to/file`
   - NO DELETION policy: "Files in .archive/ are preserved in git history. Never use rm -rf on this directory."
   - Link to manifest.json schema documentation

3. Create today's date directory (2026-02-02/) with category subdirectories:
   - deprecated/.gitkeep
   - refactored/.gitkeep
   - migrated/.gitkeep
   - documentation/.gitkeep

4. Create .archive/2026-02-02/manifest.json template with empty structure:
   ```json
   {
     "$schema": "https://ta_lab2.local/schemas/archive-manifest/v1.0.0",
     "version": "1.0.0",
     "archive_date": "2026-02-02",
     "created_at": "<ISO 8601 timestamp when first file archived>",
     "total_files": 0,
     "total_size_bytes": 0,
     "files": []
   }
   ```
   This template will be populated by Plan 12-02's manifest functions as files are archived.

The .gitkeep files ensure empty directories are tracked by git.
  </action>
  <verify>
Run: `ls -la .archive/ && cat .archive/00-README.md | head -30`
Verify:
- .archive/ directory exists
- 00-README.md contains structure diagram and retrieval instructions
- 2026-02-02/ subdirectory exists with category folders

Run: `cat .archive/2026-02-02/manifest.json`
Verify:
- manifest.json exists with $schema field
- version is "1.0.0"
- files array is empty (template state)
  </verify>
  <done>
- .archive/ root directory created
- 00-README.md documents structure, categories, and retrieval instructions
- 2026-02-02/ exists with deprecated/, refactored/, migrated/, documentation/ subdirectories
- All category directories contain .gitkeep for git tracking
- manifest.json template created with schema versioning and empty files array
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify git mv history preservation pattern</name>
  <files>
    .archive/test_git_history/.gitkeep
    .archive/test_git_history/test_file.py
  </files>
  <action>
Create a test file, archive it using git mv, and verify git log --follow preserves history:

1. Create a test file in project root:
   ```bash
   echo "# Test file for git history verification" > test_archive_history.py
   echo "def test_function():" >> test_archive_history.py
   echo "    return 'original'" >> test_archive_history.py
   git add test_archive_history.py
   git commit -m "test(12-01): create test file for git history verification"
   ```

2. Create .archive/test_git_history/ directory for test files

3. Archive using git mv (pure move, no content changes):
   ```bash
   git mv test_archive_history.py .archive/test_git_history/test_file.py
   git commit -m "test(12-01): archive test file using git mv"
   ```

4. Verify history preservation:
   ```bash
   git log --follow --oneline .archive/test_git_history/test_file.py
   ```
   Expected output: 2+ commits visible (the move commit AND the original creation commit)

5. Document verification in 00-README.md:
   - Add section "## History Verification"
   - Include the verification command and expected output
   - Note: "If git log --follow shows only 1 commit, the move was NOT pure"

IMPORTANT: The test file should remain in .archive/test_git_history/ as a permanent verification artifact. Do NOT delete it after the test.
  </action>
  <verify>
Run: `git log --follow --oneline .archive/test_git_history/test_file.py`
Expected: At least 2 commits visible (original creation + move)

Run: `grep -A 5 "History Verification" .archive/00-README.md`
Expected: Section exists with verification instructions
  </verify>
  <done>
- Test file created, committed, moved via git mv, committed again
- git log --follow shows 2+ commits (history preserved through move)
- 00-README.md updated with History Verification section
- Test file remains as permanent verification artifact in .archive/test_git_history/
  </done>
</task>

</tasks>

<verification>
Phase 12 Plan 01 verification (run all):

1. Structure verification:
   ```bash
   ls -la .archive/
   ls -la .archive/2026-02-02/
   cat .archive/00-README.md | wc -l
   ```
   Expected: All directories exist, README has 50+ lines

2. Manifest template verification:
   ```bash
   cat .archive/2026-02-02/manifest.json
   grep -c '$schema\|version\|files' .archive/2026-02-02/manifest.json
   ```
   Expected: Valid JSON with $schema, version, and files fields (3+ matches)

3. Git history verification:
   ```bash
   git log --follow --oneline .archive/test_git_history/test_file.py | wc -l
   ```
   Expected: 2 or more commits

4. README content verification:
   ```bash
   grep -c "deprecated\|refactored\|migrated\|documentation" .archive/00-README.md
   ```
   Expected: 4+ matches (all categories documented)

5. NO DELETION policy documented:
   ```bash
   grep -i "no deletion\|never.*rm\|preserved" .archive/00-README.md
   ```
   Expected: At least 1 match
</verification>

<success_criteria>
1. .archive/ directory exists with 00-README.md (50+ lines)
2. 2026-02-02/ exists with 4 category subdirectories
3. manifest.json template exists with $schema versioning and empty files array
4. git log --follow shows 2+ commits for test file (history preserved)
5. README documents structure, categories, retrieval instructions, and NO DELETION policy
6. All files committed to git
</success_criteria>

<output>
After completion, create `.planning/phases/12-archive-foundation/12-01-SUMMARY.md`
</output>
