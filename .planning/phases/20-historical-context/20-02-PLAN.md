---
phase: 20-historical-context
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md
autonomous: true

must_haves:
  truths:
    - "All bar/EMA documentation in docs/ cataloged"
    - "Each doc assessed on 4 criteria: architecture, implementation, rationale, actionable"
    - "Documentation gaps identified (missing topics)"
    - "Leverage-worthy docs clearly marked"
  artifacts:
    - path: ".planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md"
      provides: "Multi-dimensional documentation catalog"
      contains: "## Leverage-Worthy Documentation"
  key_links:
    - from: "docs/**/*.md"
      to: "20-DOCUMENTATION-INVENTORY.md"
      via: "File scan and quality assessment"
      pattern: "Topic.*Quality.*Source"
---

<objective>
Create comprehensive documentation inventory cataloging all bar/EMA-related documentation with multi-dimensional categorization

Purpose: Identify what documentation already exists that can be leveraged for v0.6.0, what's missing, and what's outdated. Prevents reinventing the wheel and surfaces documentation gaps.

Output: .planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md with categorized catalog, gap analysis, and leverage recommendations
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-historical-context/20-CONTEXT.md
@.planning/phases/20-historical-context/20-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scan and categorize all bar/EMA-related documentation</name>
  <files>.planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md</files>
  <action>
**Step 1: Identify documentation sources**

Scan these directories for bar/EMA relevant docs:
- docs/features/*.md (especially ema-*, bar-*)
- docs/time/*.md (time model, sessions, architecture)
- docs/architecture/*.md (schemas, db-keys, structure)
- docs/ops/*.md (update procedures, db state)
- docs/reference/*.md (updating, refresh methods)
- docs/EMA_STATE_STANDARDIZATION.md (root level)
- .planning/phases/*/RESEARCH.md (planning research)

**Step 2: For each document, assess on 4 dimensions:**

1. **Explains architecture** (Y/N): Does it describe how bars/EMAs work structurally?
2. **Contains implementation** (Y/N): Does it have code examples, validation logic, state patterns?
3. **Shows rationale** (Y/N): Does it explain WHY decisions were made?
4. **Has actionable info** (Y/N): Can it directly inform v0.6.0 work?

**Leverage-worthy = ALL FOUR must be Y**

**Step 3: Categorize by topic:**
- Bars: bar-creation.md, bar-implementation.md, etc.
- EMAs: ema-study.md, ema-overview.md, ema-multi-tf*.md, etc.
- Time Model: time_model_overview.md, trading_sessions.md, dim_timeframe.md, etc.
- State Management: EMA_STATE_STANDARDIZATION.md, state patterns in features
- Operations: update_price_histories_and_emas.md, refresh procedures

**Step 4: Assess quality:**
- **Complete**: Comprehensive, up-to-date, accurate
- **Partial**: Has useful content but incomplete or partially outdated
- **Outdated**: Superseded by later decisions or no longer accurate
- **Stub**: Placeholder or minimal content

**Step 5: Identify source (phase):**
- Pre-GSD (before Phase 1)
- Phase 6 (Time Model)
- Phase 7-10 (Feature/Signals/Validation)
- v0.5.0 (Phases 11-19)

**Build inventory table:**
| Document | Topic | Quality | Source | Arch | Impl | Rationale | Action | Leverage? |
  </action>
  <verify>
- At least 20 documents scanned (docs/ has 70+ markdown files)
- Each document has all 4 assessment criteria evaluated
- Topic categorization complete (Bars, EMAs, Time, State, Ops)
- Quality assessment (Complete/Partial/Outdated/Stub) assigned
  </verify>
  <done>
All bar/EMA-related documentation scanned with multi-dimensional categorization complete
  </done>
</task>

<task type="auto">
  <name>Task 2: Create 20-DOCUMENTATION-INVENTORY.md with catalog and gap analysis</name>
  <files>.planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md</files>
  <action>
Create 20-DOCUMENTATION-INVENTORY.md with this structure:

```markdown
# Documentation Inventory: Bars & EMAs

## Executive Summary
[2-3 paragraphs: what documentation exists, what's leverage-worthy, key gaps]

## Inventory Criteria

**Leverage-Worthy Criteria (ALL must apply):**
1. **Explains architecture**: How bars/EMAs work structurally
2. **Contains implementation**: Code examples, validation logic, state patterns
3. **Shows rationale**: WHY decisions were made
4. **Has actionable info**: Can directly inform v0.6.0 work

**Quality Levels:**
- Complete: Comprehensive, up-to-date, accurate
- Partial: Useful but incomplete or partially outdated
- Outdated: Superseded or no longer accurate
- Stub: Placeholder or minimal content

## Full Inventory

### By Topic

#### Bars
| Document | Quality | Source | A | I | R | Act | Leverage? |
|----------|---------|--------|---|---|---|-----|-----------|
| docs/features/bar-implementation.md | Complete | Pre-GSD | Y | Y | Y | Y | YES |
| docs/features/bar-creation.md | Partial | Pre-GSD | Y | Y | N | Y | NO |
| ... | ... | ... | ... | ... | ... | ... | ... |

#### EMAs
[Same table format]

#### Time Model
[Same table format]

#### State Management
[Same table format]

#### Operations
[Same table format]

## Leverage-Worthy Documentation

These documents meet all 4 criteria and should be used in v0.6.0:

| Document | Topic | Key Content for v0.6.0 |
|----------|-------|------------------------|
| docs/features/bar-implementation.md | Bars | OHLC validation patterns, repair strategies |
| docs/EMA_STATE_STANDARDIZATION.md | State | State management patterns, watermark design |
| ... | ... | ... |

## Documentation Gaps

**Missing documentation identified:**

| Gap | Topic | Why Needed for v0.6.0 | Priority |
|-----|-------|----------------------|----------|
| Gap detection logic | Bars | Inconsistent across scripts, need standardized approach | HIGH |
| Quality flag semantics | Bars | Flags exist but meaning undocumented | MEDIUM |
| EMA variant rationale | EMAs | 6 variants exist but WHY each exists unclear | HIGH |
| Incremental refresh patterns | State | Different scripts use different patterns | HIGH |

**Outdated documentation to update or archive:**
| Document | Issue | Recommendation |
|----------|-------|----------------|
| docs/time/ema_model.md | Superseded by unified table | Archive or update |
| ... | ... | ... |

## Recommendations for v0.6.0

1. **Leverage immediately**: [List of docs to use as-is]
2. **Review and update**: [List of partial docs to verify against code]
3. **Create new**: [List of missing docs needed]
4. **Archive**: [List of outdated docs to retire]
```

**Writing guidelines:**
- Be specific about what makes a doc leverage-worthy
- Note page/section for actionable content
- Identify gaps by comparing what exists vs what's needed
- Mark outdated docs explicitly with reason
  </action>
  <verify>
- File exists: .planning/phases/20-historical-context/20-DOCUMENTATION-INVENTORY.md
- Full inventory table has at least 15 documents
- Leverage-worthy section identifies top docs with specific content notes
- Gaps section identifies at least 3 missing documentation areas
- Recommendations section has actionable items
  </verify>
  <done>
20-DOCUMENTATION-INVENTORY.md created with multi-dimensional catalog, leverage-worthy docs identified, gaps documented, and recommendations for v0.6.0
  </done>
</task>

</tasks>

<verification>
Phase requirement HIST-02 verification:

1. Documentation inventory complete: At least 15 documents cataloged
2. Multi-dimensional categorization: Topic + Quality + Source + 4 criteria
3. Leverage-worthy identified: Docs meeting all 4 criteria clearly marked
4. Gaps identified: Missing documentation noted with priority
5. Actionable recommendations: Clear next steps for v0.6.0
</verification>

<success_criteria>
- [ ] 20-DOCUMENTATION-INVENTORY.md exists and is non-empty
- [ ] Full inventory table with at least 15 documents
- [ ] Each document assessed on all 4 leverage criteria
- [ ] Leverage-worthy section with specific content notes
- [ ] Gaps section with at least 3 identified missing areas
- [ ] Recommendations section with actionable items
</success_criteria>

<output>
After completion, create `.planning/phases/20-historical-context/20-02-SUMMARY.md`
</output>
